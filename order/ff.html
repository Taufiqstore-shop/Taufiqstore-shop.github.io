<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Order Free Fire</title>

<!-- EMAILJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
(function(){
  emailjs.init("U8RMiL7QYvlKAmOkI"); // PUBLIC KEY LU
})();
</script>

<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Arial;
}
.box{
  max-width:420px;
  margin:20px auto;
  padding:15px;
}
input,button{
  width:100%;
  padding:12px;
  margin:6px 0;
  border:none;
  border-radius:8px;
}
button{
  background:#1abc9c;
  color:#000;
  font-weight:bold;
}
.diamond{
  background:#111;
  border:1px solid #333;
  margin:6px 0;
}
.active{
  border:2px solid #1abc9c;
}
</style>
</head>

<body>

<div class="box">
<h2>FREE FIRE</h2>

<input id="idGame" placeholder="ID Game">
<input id="wa" placeholder="No WhatsApp">
<input id="email" placeholder="Email">

<h3>Pilih Diamonds</h3>

<div class="diamond" onclick="pilih(this,'5 Diamonds','830')">5 Diamonds - Rp 830</div>
<div class="diamond" onclick="pilih(this,'70 Diamonds','9120')">70 Diamonds - Rp 9.120</div>
<div class="diamond" onclick="pilih(this,'140 Diamonds','18240')">140 Diamonds - Rp 18.240</div>
<div class="diamond" onclick="pilih(this,'355 Diamonds','45580')">355 Diamonds - Rp 45.580</div>
<div class="diamond" onclick="pilih(this,'720 Diamonds','91160')">720 Diamonds - Rp 91.160</div>
<div class="diamond" onclick="pilih(this,'1000 Diamonds','127620')">1000 Diamonds - Rp 127.620</div>

<button onclick="kirim()">NEXT</button>
</div>

<script>
let DIAMONDS="", HARGA="";

function pilih(el,d,h){
  document.querySelectorAll('.diamond').forEach(x=>x.classList.remove('active'));
  el.classList.add('active');
  DIAMONDS=d;
  HARGA=h;
}

function kirim(){
  const order={
    game:"Free Fire",
    idGame:idGame.value,
    wa:wa.value,
    email:email.value,
    diamonds:DIAMONDS,
    harga:HARGA,
    status:"MENUNGGU",
    waktu:new Date().toLocaleString()
  };

  // localStorage (backup)
  localStorage.setItem("lastOrder",JSON.stringify(order));

  // Firebase
  fetch("https://databse-c8850.firebaseio.com/orders.json",{
    method:"POST",
    body:JSON.stringify(order)
  });

  // EMAIL KE USER
  emailjs.send("service_x3qrpsy","template_order",{
    to_email:order.email,
    game:order.game,
    diamonds:order.diamonds,
    harga:order.harga,
    status:"MENUNGGU"
  });

  location.href="/payment/ff";
}
</script>

</body>
</html>
